{"componentChunkName":"component---src-templates-post-content-view-js","path":"/post/deploying-react-app-on-gae","result":{"data":{"markdownRemark":{"html":"<p>For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors.</p>\n<h2>GAE is not a static host; it's a virtual machine</h2>\n<p>So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?</p>\n<h2>With default config, GAE only executes two scripts when deploying</h2>\n<p>They are <code>npm install</code> and <code>npm start</code>.</p>\n<p>Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default <code>npm start</code> provided by Create-React-App, which equals to <code>node scripts/start.js</code> if you check out <code>package.json</code>, takes much time, and it's long enough to make the app not working. So we need a faster way to <em>serve</em> it.</p>\n<h2>Serve can do the trick</h2>\n<p>Literally, <a href=\"https://github.com/zeit/serve\">serve</a>.</p>\n<p>Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to <code>postinstall</code> instead of <code>prestart</code> . By this way, GAE automatically builds right after it installs dependencies.</p>\n<p>You can also use some host framework (like <a href=\"https://github.com/expressjs/express\">express</a>) to do the hosting and routing stuff too.</p>\n<h2>Config the port</h2>\n<p>React development server default port is 3000, and serve's is 5000, while GAE uses 8080.</p>\n<p>The scripts in <code>package.json</code> I used when finally successfully deployed looks like this:</p>\n<pre><code>\"script\": {\n  \"postinstall\": \"npm run build\",\n  \"start\": \"serve -l 8080 -s build\"\n}\n</code></pre>\n<p>You need to configure app.yaml too, but I think there are many resources talking about how to do it.</p>\n<p>I hope this helps!</p>","frontmatter":{"date":"2019-09-09","path":"/post/deploying-react-app-on-gae","title":"Deploying React.js app on GAE","tags":"React.js, GAE"}},"allImageSharp":{"edges":[]}},"pageContext":{"slug":"/deploying-react-app-on-gae/"}}}